<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  <div class="ion-text-center ion-padding profile-top-section">
    <div class="avatar-container" (click)="fileInput.click()">
      <ion-avatar class="profile-avatar">
        @if (userProfile?.avatar_url) {
        <img [src]="userProfile.avatar_url" />
        } @else {
        <div class="large-avatar-text">
          {{ getInitials(userProfile?.username) }}
        </div>
        }
      </ion-avatar>

      @if (isUploading) {
      <div class="upload-overlay">
        <ion-spinner name="crescent" color="light"></ion-spinner>
      </div>
      }

      <div class="edit-icon">
        <ion-icon name="camera"></ion-icon>
      </div>
    </div>

    <input
      type="file"
      #fileInput
      style="display: none"
      (change)="onFileSelected($event)"
      accept="image/png, image/jpeg"
    />

    <h2 class="username-display">@{{ userProfile?.username || 'user' }}</h2>
    <ion-note>Spread Chat Member</ion-note>
  </div>
  <ion-list [inset]="true" class="account-details-list">
    <ion-list-header>
      <ion-label color="primary">Account Details</ion-label>
    </ion-list-header>

    <ion-item>
      <ion-icon slot="start" name="person-outline" color="primary"></ion-icon>
      <ion-label>
        <p>Display Name</p>
        <h2>{{ userProfile?.username }}</h2>
      </ion-label>
    </ion-item>

    <ion-item>
      <ion-icon slot="start" name="mail-outline" color="primary"></ion-icon>
      <ion-label>
        <p>Email Address</p>
        <h2>{{ userProfile?.email || 'Loading...' }}</h2>
      </ion-label>
    </ion-item>

    <ion-item>
      <ion-icon slot="start" name="calendar-outline" color="primary"></ion-icon>
      <ion-label>
        <p>Member Since</p>
        <h2>{{ userProfile?.created_at | date:'longDate' }}</h2>
      </ion-label>
    </ion-item>
  </ion-list>

  <div class="ion-padding ion-text-center">
    <p style="font-size: 0.8rem; color: #888">
      This profile is private. Only you can see these details.
    </p>
  </div>
</ion-content>
